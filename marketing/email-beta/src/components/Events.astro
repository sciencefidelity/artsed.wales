---
import moment from "moment"
import { urlFor } from "../lib/utils"
const { locale, en, cy } = Astro.props
---

<table
  class="py-40 bg-white border-2"
  style="
    padding-top: 40px;
    padding-bottom: 40px;
    background-color: #FFF;
    border-bottom: 3px solid #E4DAC2;
  "
  border="0"
  cellpadding="0"
  cellspacing="0"
>
  <tbody>
    <tr>
      <td>
        {locale.newsletter.events.map(event => (
          <table
            class="event block float-left w-half text-left"
            style="
              display: block;
              float: left;
              width: 50%;
              text-align: left;
            "
            border="0"
            cellpadding="0"
            cellspacing="0"
          >
            <tbody>
              <tr>
                <th class="p-20" style="padding: 20px;">
                  <a href={event.britelink}>
                    <img
                      src={urlFor(event.mainImage)
                        .auto("format")
                        .width(600)
                        .height(400)
                        .quality(80)
                        .url()}
                      class="w-full h-auto"
                      style="width: 100%; height: auto;"
                      width="300"
                      height="200"
                      alt={event.title}
                    />
                  </a>
                  <time
                    datetime={
                      moment(new Date(event.dateStart)).format("yyyy-MM-dd")
                    }
                    class="block mt-10 mx-0 mb-2 py-5 px-0 text-sm font-300"
                    style="
                      display: block;
                      margin-top: 10px;
                      margin-right: 0px;
                      margin-bottom: 2px;
                      margin-left: 0px;
                      padding-top: 5px;
                      padding-right: 0px;
                      padding-bottom: 5px;
                      padding-left: 0px;
                      font-size: 14px;
                      font-weight: 300;
                    "
                  >
                    {
                      moment(new Date(event.dateStart))
                        .format("d MMMM yyyy, k:mm")
                    }
                  </time>
                  <h2
                    class="p-0 m-0 text-lg font-700 leading-6"
                    style="
                      padding: 0px;
                      margin: 0px;
                      font-size: 18px;
                      font-weight: 700;
                      line-height: 1.5em;
                    "
                    set:html={event.title}
                  />
                  <p
                    class="py-5 px-0 m-0 font-200 leading-6"
                    style="
                      padding-top: 5px;
                      padding-right: 0px;
                      padding-bottom: 5px;
                      padding-left: 0px;
                      margin: 0px;
                      font-weight: 200;
                      line-height: 1.5em;
                    "
                    set:html={event.summary}
                  />
                  <p
                    class="py-5 px-0 m-0 font-200 leading-6"
                    style="
                      padding-top: 5px;
                      padding-right: 0px;
                      padding-bottom: 5px;
                      padding-left: 0px;
                      margin: 0px;
                      line-height: 1.5em;
                    "
                  >
                    <a
                      href={event.britelink}
                      class="text-accent font-400 no-underline hover:underline"
                      style="
                        color: #00ABD6;
                        font-weight: 400;
                        text-decoration: none;
                      "
                      set:html={locale.labels.register}
                    />
                  </p>
                </th>
              </tr>
            </tbody>
          </table>
        ))}
      </td>
    </tr>
  </tbody>
</table>
